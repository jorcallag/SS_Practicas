#include "jorcallag-LibSS\jorcallag-LibSS.h"

int EscribeK(int NroKBytes, char* NombreArchivo);

int main(int argc, char* argv[]) {

	setlocale(LC_ALL, "Spanish");

	EscribeK(1024 * 200, (char*)"C://Users//Jorlu//Desktop//WS//SS//PruebaP5.txt");
	double segs = MideRetraso("Retraso en segs despues de ejecutar EscribeK: ");
	float a = ((1024 * 200) / pow(2, 10)) / segs;
	printf("Velocidad de escritura del disco duro: %f MB por seg.\n", a);

	CheckError(FALSE, "Primera llamada: no muestra nada", 0);
	CheckError(TRUE, "Segunda llamada: muestra error y sigue", 0);
	CheckError(TRUE, "Tercera llamada: muestra error y para", 1);

	printf("\nPulse la tecla RETORNO para terminar\n");
	getchar();
	return 0;

}

int EscribeK(int NroKBytes, char* NombreArchivo){

	static char Buffer[1024];
	int counter;
	FILE* ptr_myfile;
	ptr_myfile = fopen(NombreArchivo, "wb");
	if (!ptr_myfile){
		printf("Unable to open file!");
		return 1;
	}
	for (counter = 0; counter < NroKBytes; counter++){
		fwrite(Buffer, sizeof(Buffer), 1, ptr_myfile);
	}
	fclose(ptr_myfile);
	return 0;

}
